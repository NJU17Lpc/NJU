## 商务智能

#### 选择题

##### 1、商务智能的目标包括



## 数据仓库

#### 选择题

##### 1、原子层拥有数据仓库最低粒度的数据，因此，在数据通过ETL进入原子层时，应该与数据源保持相同粒度

##### 2、由于数据仓库的“不可更新”特性，数据仓库中的数据实际上“滞后”的。这类问题可以通过操作数据存储(ODS)加以改善

​	另一个问题：由于数据仓库的“不可更新”特性，数据仓库中的数据实际上“滞后”的。所以数据仓库**必须**定期或不定期地采用刷新方式，将数据库等数据源中最新的数据变化，反应到数据仓库中

##### 3、鉴于大多数数据仓库系统仍然使用关系型数据库加以实现，在线系统需要访问数据仓库中的信息时，依然可以比照数据库的访问方式，采用SQL等进行直接查询

##### 4、即使使用关系型数据库作为数据仓库的后台存储技术，由于目标、性能和使用对象等的不同，数据仓库仍然拥有自身特有的数据建模思想、索引以及优化方法

##### 5、数据仓库是一种反映主题的全局性数据组织，在执行周期性分析应用或者局部分析应用时，往往效率不高。在这种情况下，可以按照部门或个人，分别建立反映各个子主题的局部性数据组织，称为数据集市

##### 6、数据仓库内部以“快照”的数据结构为中心来组织。快照通常包括关键字、时间、非关键字的主要数据和二级数据四个部分，其中非关键字的主要数据是数据仓库用以存放信息的主要部分



上面不想写了

#### 简答题

##### 1、什么是数据仓库，其四大特色是什么

定义

- 数据仓库就是一个面向主题的、集成的、非易失的（稳定的）、时变的（随时间不断变化的）数据集合，用于支持经营管理过程中的决策制定

四大特征

- 面向主题
  - 指的是：数据仓库内的信息，按照主题进行组织，**为按主题进行决策的过程提供信息**
  - 数据仓库中的主题有时会因用户主观要求的变化而变化
  - **面向主题的数据组织**方式要求：每个主题中包含了主题相关的所有信息，同时抛弃了与分析处理无关或不需要的数据。（不同主题之间也有重叠的内容）
- 集成
  - 数据从**多个数据源**获取
  - 需要统一，**消除**不同数据源数据的**不一致**：字段同名异义，单位不同一...
  - 需要综合，对原有数据进行**综合和计算**，如统计、抽样...
- 非易失（稳定的）
  - 主要执行查询，一般不怎么更新操作
  - 但是是需要更新的
    - 新的分析决策，需要新的数据抽取，更新
    - 过时数据丢弃
  - 稳定的数据环境有利于分析操作和决策制定
- 时变的（随时间不断变化）
  - 数据仓库的信息不是时间点的信息，而是从过去某个时间点，到目前，各个阶段的信息
  - 于是数据仓库的数据通常带有**时间属性**，需要**<u>以一定时间段为单位进行统一更新</u>**
    - 加新内容、删去旧内容、更新时间相关综合数据

##### 2、为什么在传统的以数据仓库为核心的事务处理环境中，不适宜建立DSS等分析型应用（两次）

主要原因有以下六条

- 事务处理和分析处理的**性能特性**不同
  - 事务处理
    - **时间**短、**数据量**小
    - 操作**频率**高，**并发**程度大
    - 允许多个用户按分时方式**使用资源**
  - 分析处理
    - 每次分析要连续运行很久，数据量大
    - 操作频率低，无并发要求
    - 占用大量资源
- 数据集成问题
  - 用于分析处理的数据可能来自多种**不同的数据源**
  - 事务处理只需要业务相关**细节**数据，对集成应用考虑很少，**分散而非集成，数据不一致**
  - **DSS应用需要集成数据**，而事务处理环境的数据很复杂，要集成的话：加重**程序员**负担，**重复计算**，分析处理**效率低**
- 数据的动态集成问题
  - （对比静态集成）：一次集成，之后不变，若数据变化，不能反映给决策者，数据过时
  - 集成数据必须以**一定周期刷新**，但**传统事务处理环境不具备动态集成的能力**
- 历史数据问题
  - 事务处理
    - 一般**当前数据**，存3-6月短期数据
    - 历史数据也可以保存，但往往不用了
  - 分析处理
    - 重**历史数据**，5-10年，做详细分析把握发展趋势
- 数据的综合问题
  - 事务处理需要细节性操作数据，“**数据丰富、信息贫困**”
  - 分析处理需要对**细节数据进行不同程度的综合**，传统的事务处理系统不具备这种**综合能力**，同时这种综合也是**冗余**，会被限制
- 数据的访问问题
  - 事务处理
    - 提供多种不同类型的，**访问数据的操作**；**实时更新**数据库
  - 分析处理
    - **“读”操作**为主，不用实时更新但要**定时刷新**
- 综上
  - 要提高分析处理和决策支持的效率和有效性
    - 要从细节操作数据中，分离出综合性分析数据
    - 要建立单独的分析处理环境

##### 3、什么是数据仓库中的粒度？为何在数据仓库中需要采用多重粒度？试举例说明

粒度

- 是对数据仓库中的**数据的综合程度**的一个度量
  - 既影响数据仓库中**数据量的多少**（粒度小数据量大）
  - 也影响数据仓库能够**回答询问的种类**（粒度小询问种类多）

为什么采用多重粒度

- 以应对不同级别的粒度要求
  - 大粒度数据
    - 节省存储空间，可用于快速存储设备
    - 提高性能
  - 小粒度数据
    - 可用于低速存储设备
    - 能满足细节查询
- 举例
  - 记录一个顾客的电话记录，一个记录200字节，一个月有200次通话
    - 大粒度数据记录一个月综合信息，一个月只要200字节
    - 小粒度数据每次通过都要记录，一个月40000字节
  - 想要查询xxx是否给xxx打了电话
    - 大粒度数据查不到，因为细节已经消失
    - 小粒度数据需要进行一定检索，返回结果

##### 4、数据仓库的物理模型设计优化技术有哪些？对这些技术进行简要的说明（两次）

- 合并表
  - 在常见分析处理中，可能需要执行多表连接操作。为了节省IO开销，可以把这些表中记录混合存放在一起，来降低表连接操作的代价
- 建立数据序列
  - 根据周期运行的数据分析应用访问数据的先后顺序，维护一个冗余的序列，提前把需要的数据按需准备好。于是在访问的时候就不用访问不同表格的不通过元组，提升效率
- 引入冗余
  - 在面向某个主题的分析过程中，通常要访问不同表的多个属性，而每个属性又可能参与多个不同的主题表中，因此可以**修改关系模式**，把**某些属性复制到不同的主题表**中，减少一次分析需要访问的表的数量
- 表的物理分割
  - 根据表中每个属性的访问频率和稳定性程度，对表的存储结构进行分割
    - 访问频率较高的属性，单独考虑物理存储结构，来选择合适的索引策略和特定的物理组合方式
    - 需要频繁更新的属性，可以单独组织物理存储，以免因数据更新带来的空间重组、重构等工作
- 生成导出数据
  - 在原始细节数据基础上，进行一些统计和计算，生成导出数据并保存在数据仓库
  - 避免在分析过程中进行过多统计和计算操作，减少输入、输出次数，提高分析操作性能
  - 避免不同用户重复统计操作可能的误差
- 建立广义索引
  - 建立用于记录数据仓库中，与“最”有关的统计结果的索引
  - 这种广义索引数据量很小，可以每次数据加载时生成或刷新这样的广义索引。用户可以直接获取统计值，而不需要对整个仓库扫描

##### 5、什么是数据仓库中的历史完整性/一致性？为保持历史完整性/一致性，可以采用哪些方式？试举例说明

- 历史完整性：部分维度属性是会随时间⽽发⽣变化的，若只是将这些变化的维度属性 值作简单的修正，即在维度表中只保留该维度属性的当前值，这会直接影响到对事实 表中该维度属性所对应的事实数据元组的访问，特别是⽆法根据维度属性值的变化情 况来进⾏分析处理。**<u>保证维度中的历史数据在改变之后不丢失。</u>** 
  - 使用外关键字只能存一行，无法存放历史数据
- ⽅法：
  - 针对稳定维度：没有什么需要处理的
  - 针对渐变维度 
    - 改写属性值：容易实现，但不能对旧属性值的任何历史数据进⾏维护（⽆法保证历 史⼀致性）
    - 添加维度⾏：准确跟踪渐变属性的主要⽅法；引⼊新的⾏⽤来反映新的属性值；增 加了维度⾏的膨胀；可以引⼊⽣效或截⽌⽇期 
    - 添加维度列：使⽤维度列保存旧的属性值；不适合跟踪维度属性⼤量变化 
  - 针对快变维度
    - 使用微型维度
      - 分析频率高或者变化频率大的属性，应该拆分成单独的微型维度，直接附加在事实表上：年龄等
    - 预设波段
      - 收入与购买总额等不断变化的属性，应该转换成呈波段分布的范围，只能在数目很小的离散值中取值，减少维度表中数据量

##### 6、简述数据仓库刷新的方法，并对每种方法进行简单的说明

- 数据仓库系统需要感受OLTP数据库中数据的变化情况，及时有效地将数据反应到数据仓库中，就是数据刷新
- 方法，这几种可以同时采用，满足不同数据源刷新需要
  - 时间戳
    - 方法：如果**数据库中的记录有时间属性**，那么可以根据数据库的数据**有无更新**，以及更新时修改了**时间标志**，实现数据仓库中数据动态刷新
    - 但大多数数据库系统的数据没有时间属性
  - DELTA文件
    - 方法：有些基于OLTP数据库的操作型**应用程序**工作时会**生成DELTA文件**来**记录**：应用做的**数据修改**工作。根据此进行数据刷新
    - 能避免对整个数据库的对比扫描，提高刷新效率；但这种**应用程序不普遍**，据此修改应用程序工作量大
  - 建立映像文件
    - 方法：**上一次**数据刷新**后**，对数据库做一次快照1；**本次**数据刷新**前**再做一次数据库快照2；比照**快照的不同**，确定**数据仓库的刷新**操作
    - 对数据库和应用，没有特殊要求；但是占用**大量系统资源**，影响原有数据库系统性能
  - 日志文件
    - 方法：一般现代OLAP数据库都有日志文件，可根据日志信息实现数据刷新
    - 日志是OLTP数据库固有机制，于是不影响原有数据库性能，拥有比DELTA和映像文件，更高的刷新效率；但有些遗留数据库系统没有日志文件机制，用不了



##### 7、数据仓库中的ETL技术是什么？在数据仓库架构中ETL完成什么任务？

是什么

- 是数据抽取/转换/装载工具，用来描述将数据从异构数据源，经过抽取、转换、加载，至数据仓库的过程
- 分为两类（应该不用写）
  - **产生源代码的软件**：比运行时软件强大，以原有数据的格式对它们进行访问
  - **产生参数化的运行时模块的软件**：先对原有数据格式进行统一，统一后才能访问原有数据

任务

- 使得**转化、重新格式化、从多个传统操作型数据源中集成数据的过程**，**自动化进行**
- 数据抽取：将数据源中数据通过网络进行抽取，并经加工、转换、综合后形成数据仓库中的数据
- 数据转换：数据元素的重命名、格式化，数据编码的转换
- 数据装载：数据经过转换、清洗后，需要装载到目标数据库中。数据装载的方式有多种：全表对比方式、时间戳方式、日志表方式、全表删除后再插入的方式
- 数据刷新：抽取进入数据仓库的数据，经过一段时间后需要修改。刷新的过程类似于抽取，数据量小于抽取。但是仅需要对修改过的数据进行刷新，因此实现难度和复杂性大于数据抽取

##### 8、为何在数据仓库体系中还需要建立数据集市？在企业中建立数据仓库和数据集市体系的方法主要是哪四种？请分别描述这些方法，并总结其优点和缺点

- 为什么
  - 二者关系：数据仓库与数据集市关系型类似于传统关系型数据库系统中的基表与视图的关系。数据集市的数据来自数据仓库，是数据仓库中数据的一个部分与局部，是一个数据的再抽取与组织的过程
  - 原因：数据仓库是反映主题的全局性数据组织，全局性的数据仓库往往太大。因此对DW的访问负载也太大
  - 在实际应用中将他们按部门或个人分别建立各个子主题与区域的局部性数据组织，就是数据集市
- 方法
  1. 自顶向下的结构
     - 先构建企业数据仓库：使用公共中央数据模型，数据再加工，减少冗余和不一致性，搜集历史的、细节的、全局的数据
     - 再基于企业数据仓库构建数据集市：选定企业模型下的部门主题；聚集数据；建立集市数据对企业数据仓库的依赖关系
     - 优点
       - 建立数据集市能减轻DW访问负载
       - 各个部门可以任意处理数据
       - 数据转换和整合在DW阶段统一完成
       - 数据缓冲功能
     - 缺点：成本高、见效慢、数据集市之间不共享资源
  2. 自底向上的结构
     - 构建数据集市：划定主题区域；快速实施，本地自治；易于复制；数据在加工；允许一定的冗余和不一致
     - 基于数据集市，构建企业数据仓库：确定各个数据集市可用性；模型的合并；消除不同数据集市之间数据不一致性
     - 优点：见效快、启动资金少
     - 缺点：
       - 各个部门都要进行数据清理整合
       - 可能造成蜘蛛网，数据不一致问题
       - 总体上没有节约资金
  3. 总线结构的数据集市
     - 不建立数据仓库，而是直接建立数据集市
     - 各个数据集市不是孤立的，相互之间通过一种**共享维表和事实表的“总线结构”**紧密联系在一起
     - 优点：
       - 共享维表和事实表，解决了建立数据集市的许多问题
     - 缺点：
       - 结构基于多为模型，应用限制于OLAP
       - 多个数据源直接影响多个集市，造成结构不十分稳定
  4. 企业级数据集市结构
     - 在没有数据仓库的前提下，用总线结构构建数据集市
     - 数据集市遵循总线结构独立开发部署
     - ETL过程不存在数据结构问题
     - 严格遵守公共结构，标准化维度和实施在整个企业中有统一解释
     - 优点：
       - 不同维度模型完成后，它们之间能默契配合
       - 有结构框架指导总体设计，所有问题划分为大小合适的业务过程块。不同开发小组遵循该结构，工作异步开展

##### 9、商务智能定义

- 从数据到信息，BI是将数据转换为有意义的内容的过程
  - BI通过把来自于不同系统的数据汇聚成一个单一的可获得的信息源----数据仓库
  - 基于用户的要求，使用各种工具来分析数据仓库中的数据，并可视化其结果

- 访问、钻研、分析和挖掘数据获得启发和了解，从而提供更完善更全面考虑的决策支持

##### 10、BI构建

数据源层：RDBMS, data files

数据获取层: DW tools, ETL, Meta data base, data modeling tools

数据存储与管理层: integrative data, current data, historic data

信息访问层:query & report, OLAP tools, DM tools

##### 11、什么是数据挖掘

数据挖掘就是对数据库（数据仓库）中蕴含的、未知的、非平凡的，有潜在应用价值的模式（规则）的提取

##### 12、什么是操作型处理

也叫事务处理，是指**对数据库的日常联机访问操作**，通常是对一个或一组记录的查询和修改，主要是为企业特定的应用服务的，所以也叫联机事务处理。

##### 13、什么是分析型处理

也叫做信息型处理，主要用于**企业管理人员的决策分析**，为制订企业的未来经营管理计划提供辅助决策信息。

典型的分析型处理有：DSS

##### 14、数据仓库有哪些数据组织形式

- 简单堆积文件
- 轮转综合文件
- 简化直接文件（简单堆积文件基础上加一定时间段的数据库快照）
- 连续文件

##### 15、快照的组成

是一种数据结构，DW以他为中心组织

- 关键字
- 时间单元：事情发生的时刻或捕获数据的时候，可暗含
- 非关键字数据：主要数据
- 二级数据：捕获的

##### 16、元数据的组成和种类

是关于数据的数据，描述了数据的结构、内容、编码、索引等

可以将数据仓库与复杂的数据源系统的变化隔离，是DW开发和维护的关键因素，也是保证数据抽取质量的依据

种类：

- 关于数据源的元数据
- 数据模型...
- 数据仓库映射...
- 数据仓库使用...

##### 17、OLAP数据构造方式

OLAP定义：联机分析处理

- 通过专门的数据综合引擎，辅之以更加直观的数据访问界面，力图统一分散的公共应用逻辑，在短时间内相应非数据处理专业人员的复杂查询要求。这类技术叫OLAP

- ROLAP: relational OLAP 用多维**综合**引擎+sql+RDBMS
  - 用传统的RDBMS管理，将星型（雪花型）模式用二维表形式存储，表间用关键字相连的关系模式
  - 在ROLAP查询操作会改写为RDBMS的查询操作
- MOLAP: multi-dimensional OLAP 用多维**数据**引擎
  - 用“多维数据库管理系统管理”，采用的基本数据模式就是“多维数组”
  - 事实表被表示成多维数组，维属性值映射为多维数组的下标，度量值作为多维数组的取值存在数据单元。查询时可以通过下标取值找到相应多维数组中度量值
- HOLAP混合联机分析处理

##### 18、4步骤维度设计过程

- 选择业务过程
- 声明粒度
- 确认维度
- 确认事实

##### 19、数据仓库设计原则

- 面向主题原则：数据仓库目的、数据组织方法
- 数据驱动原则：数据来源：是对已有数据进行加工处理而获得的，建立在已有的数据库基础上，利用数据模型识别数据库与数据仓库数据的共同性
- 原型法设计原则：不断变化的分析需求、逐步求精的设计过程（共同合作）、启发方式、需求预测很重要

##### 20、数据仓库的设计步骤

- 系统规划：明确主题（初步，原型法），技术准备（性能、环境）
- 概念模型设计：确定系统边界（决策类型、感兴趣、哪些数据源）、确定主题（明确主题各个属性取值，主题间关系）、再用E-R
- 逻辑模型设计：E-R转成RDBMS的二维表，粒度划分（详细数据、轻度总结、高度总结）、数据分割（逻辑上把统一的数据分割成较小的，可以独立管理的数据单元存储，便于重构恢复，提高索引和扫描效率。目的是提高性能）、定义数据来源以及抽取规则
- 物理模型设计：几个优化方法
- 数据仓库生成：建立数据模式，写数据抽取程序，数据加载
- 数据仓库的运行与维护：建立分析、决策型应用系统，使用过程中加深理解改进主题（原型法），数据刷新保持数据仓库数据一致性

## 数据立方体

#### 综合题（1,2,3题两次都考了，并且是考点）

##### 1、请给出一个具体的数据立方体模型的例子（画图）

某一地区人们的收入情况

- 三个维度
  - 产品：电视、照相机、电脑
  - 商店：美国店、加拿大店、中国店
  - 日期：第一季度、第二季度、第三季度、第四季度
- 度量值：销售金额

##### 2、以该数据立方体为例子，介绍OLAP中维和层的概念

- 维是观察度量值的角度
  - 比如可以从时间维度、产品维度、商店维度来观察“销售金额”
  - 从时间角度来统计不同时间段的销售金额，或者可以从产品分类维度统计每一类的销售金额
- 层是反映了对度量值的观察深度，一般“层”与“维”是相关联的，一个维中可允许若干层，采用多种不同的层次划分方法
  - 比如对商品维进行层次划分，按价格分为高档、中档、低档
  - 按时间维分为日、月、季度、年
- 度量值
  - 是分析型处理中，我们所关心和分析的对象
- 维成员：维的一个取值
  - 对于度量值来说，维成员是该度量值在某维中位置的描述
- 多维数组：表示为(维1，维2，...，变量)
  - 可以看成一个根据多个下标进行定位的值的集合

##### 3、以该数据立方体中的某一维为例子，举例说明什么是切片(slice)、切块(dice)、数据概括(roll-up)、数据细化(drill-down)操作

- 切片
  - 根据某一维上的，某个**维成员取值**，选择统计数据进行分析
  - （切块时，某一个维度只选取一个成员，就成了切片）
  - 比如：取出第二季度的切片
- 切块
  - 根据某一维上的，某个**维成员取值区间**，选择统计数据进行分析
  - 根据多个维度上的，**维成员取值区间**，选择统计数据进行分析
  - 比如：取出一二季度、电脑和电视、在中美售出的切块
- 旋转
  - 调整维的排列次序的动作
- 上钻/数据概括(roll up)
  - 将多维下标的取值提升到较高的概念层次上，形成新的统计查询结果，并进行分析
  - 比如：把芝加哥、华盛顿、纽约概括为美国
- 下钻/数据细化(drill down)
  - 将多维下标的取值降低到较低的概念层次上，形成更细致的统计查询结果，并进行分析
  - 比如：把季度化成月份
- 跨钻
  - 对多个事实表进行操作
- 钻透
  - 下钻至数据立方体的最低细节后，继续细化到数据仓库/数据库的关系型表格

![image-20191231000501463](C:\Users\刘鹏程12138\AppData\Roaming\Typora\typora-user-images\image-20191231000501463.png)











