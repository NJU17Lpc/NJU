# 网络安全

## 1、ACL 

### 防火墙

- 是一种**<u>特殊编程的路由器</u>**，可用来解决内联网和外联网的安全问题

- 在两个网络之间，实施自定的，接入策略

- 防火墙内部的网络：“可信赖网络”(trusted network)；外部的因特网：“不可信赖网络”(untrusted network)

  #### 功能

  - 阻止
    - 阻止**某种类型**的通信量，从内到外，或从外到内
  - 允许
    - 与上相反

  #### 防火墙两类技术

  - 网络级防火墙
    - 防止网络中出现外来非法入侵
    - 分组过滤
      - 检查所有流入本网站的信息
      - 拒绝不符合准则的数据
    - 授权服务器
      - 检查用户登录是否合法
  - 应用级防火墙
    - 从应用程序来进行介入控制
      - 如只允许访问万维网的用用，组织FTP应用通过

### ACL: Access Control List 访问控制列表

- 我们可以配置路由器，让他去拒绝一些packet
  - 不然，路由器会存储转发所有的packet
  - 可根据特定属性允许或拒绝packet
    - 源地址
    - 目的地址
    - 上层协议（UDP/TCP）
  - ACL有隐藏声明，若没有被permitted，就denied
- ACL怎么工作的
  - ![](C:\Users\刘鹏程12138\Desktop\计网复习笔记\ACL工作.PNG)
- wildcard-mask  反掩码
  - 告诉设备要匹配到哪一位
    - 刚好与子网掩码相反
      - 如子网掩码255.255.255.0，反掩码为0.0.0.255
  - 若网络上有一地址段192.168.1.0/29
    - 若允许这个网段所有机子上网
      - access-list permit 1 192.168.1.0 0.0.0.7
    - 若只允许网络内192.168.1.1  192.168.1.5
      - access-list permit 1 192.168.1.1 0.0.0.0
      - access-list permit 1 192.168.1.5 0.0.0.0
      - access-list permit deny any any
    - 利用wildcard-mask可以把上面简化为
      - access-list permit 1 192.168.1.**1** 0.0.0.**4**（192.168.1.1为ACL的匹配条件地址）
  - PPT中对此解释
    - 反掩码就是为了告诉router，去匹配哪些地址，去忽略哪些地址
    - 反掩码中'0'指的是check this bit position
      - 即ip地址在这个bit position为1的，拿到他
    - 反掩码中'1'指的是ignore this bit position
      - 即ip地址在这个bit position为1的，忽略掉
    - 若要检查192.5.5.0 0.0.0.255上的**所有**主机
      - 反掩码用: 192.5.5.0 0.0.0.255
      - 这种镜像只用于找到**某一网络上的所有主机**
- any command
  - 因为ACL默认deny any，所以有时只要deny一小部分，permit其他部分
  - 情景：部分deny，其他permit
    - router(config)#access-list 1 deny 192.5.5.0  0.0.0.127
    - router(config)#access-list 1 permit 0.0.0.0 255.255.255.255
      - 或者用router(config)#access-list 1 permit any
- host command
  - 有时ACL想对某一个特定的主机进行设置
    - router(config)#access-list 1 permit 192.5.5.10  0.0.0.0
      - 或者router(config)#access-list 1 permit host 192.5.5.10
- Standard ACL的位置设置
  - 标准ACL没有destination参数
  - 所以ACL应该设置得与目的地址destination越近越好
- Extended ACL
  - **<u>numbered from 100-199</u>**
  - 扩展了标准ACL的能力
    - 增强了过滤流量的能力
      - 根据destination过滤
      - 根据ip protocol过滤，如icmp\rip过滤
      - 根据上层TCP/IP protocol过滤
        - 如只过滤http
        - 用operand eq,gt,lt,neq
  - 写Extended ACL语句的准则
    - ACL语句用于，全局模式
      - 例子router(config)#access-list 101 deny tcp 192.5.5.0 0.0.0.255 210.93.105.0 0.0.0.255 eq telnet log
      - 上面的telnet对应的是端口号23，还有FTP对应21
    - ACL设置时要与一个或多个interface绑定，在interface模式下
      - 例子router(config-if)#ip access-group 101 out
  - Extended ACL放置位置
    - **<u>准则：减少不必要的通信流量</u>**
    - **尽量要放得和源地址接近**
    - **对比标准ACL**
      - **因为标准ACL没有destination参数**
      - **若标准ACL放得和源接近，他只能过滤源网络，会deny许多不必要deny的流量**
      - **所以标准ACL会尽量靠近目的地**
      - **扩展ACL可以过滤destination，尽早丢掉**
  - Extended ACL可以额外设置命名
    - 可以减少一些输入
  - in and out
    - 进入router前ACL就起作用的是In，对流入端口的数据包进行限制
    - 进入router后ACL才起作用的是out，对流出端口的数据包进行限制
    - in and out设置还是要围绕准则，**<u>减少不必要的通信流量</u>**

## 2、网络安全概述

- 计算机网络上通信面临的威胁
  - 截获
    - 从网络上窃听他人的通信内容
  - 中断
    - 有意中断他人在网络上的通信
  - 篡改
    - 故意篡改网络上传送的报文
  - 伪造
    - 伪造信息在网络上传送
- 被动攻击与主动攻击
  - 截获信息的攻击称为**被动攻击**
  - **更改信息和拒绝用户**使用资源的攻击称为**主动攻击**
  - 被动攻击中
    - 攻击者观察分析某一个PDU
    - 不干扰信息流
  - 主动攻击中
    - 攻击者对某个连接中通过的PDU进行各种处理
      - 更改报文流
      - 拒绝报文服务
      - 伪造连接初始化
- 计算机网络通信安全的目标
  - 防止解析出报文内容
  - 防止通信量分析
  - 检测更改报文流
  - 检测拒绝报文服务
  - 检测伪造初始化连接
- 恶意程序(malicious program)
  - 计算机病毒
    - 通过修改其他程序来把自身或者其变种**复制进去**来完成
  - 计算机蠕虫
    - 通过网络的通信功能将自身从一个结点，**发送到另一个结点**，并**自动运行**的程序
  - 特洛伊木马
    - 一种程序，他**执行的功能超出所声称的功能**
  - 逻辑炸弹
    - 一种程序，当运行环境满足某种特定条件时，**执行其他特殊功能**
- 计算机网络安全的内容
  - 保密性
    - confidentiality
  - 安全协议的设计
  - 访问控制

## 3、一般的数据加密模型

- A向B发送明文X，但通过加密算法E加密后，得出密文Y，在因特网上传播
- 加密和解密用到密钥K(key)，是一串秘密的字符串
  - Y = Ek(X)
- 传送过程中出现的截取者，用解密算法D和解密密钥K，解出明文
  - X = Dk(Ek(X)) = Dk(Y)

- 香农论证一般经典加密方法得到的密文几乎都是可破的
- **<u>一些重要概念</u>**
  - 密码学(cryptology)
    - 密码编码学(cryptography)是密码体制的设计学
    - 密码分析学(cryptanalysis)是在未知密钥的情况下，从密文推演出明文或者密钥的技术
  - 如果不论截取者获得了多少密文，但其中都没有足够的信息来唯一地确定出对应地明文
    - 则这一密码体制称为 **<u>无条件安全地</u>**
    - 或 **<u>理论上是不可破的</u>**
  - 如果密码体制中的密码不能被**可使用的计算资源破译**
    - 则这个密码体制称为 在**<u>计算上是安全的</u>**

## 4、对称密钥和公钥密码体制

### 数据加密标准DES

- 过程
  - **<u>DES属于对称密钥密码体制，是一种分组密码</u>**
  - 加密前，对整个明文进行分组，每个组64位
  - 对每一个64位二进制数据进行加密处理
    - 产生一组64位密文数据
  - 将各组密文串接起来，即得出整个的密文
  - 其中使用的密钥为64位
    - 实际密钥长度位56位，剩下8位用于奇偶校验

- DES的保密性分析
  - 算法公开，密钥保密
  - 如今最好的方法还是穷举法
  - 是世界上第一个公认的实用密码算法标准
  - 目前较为严重的问题是DES的密钥长度
  - 现在已经设计出来搜索DES密钥的专用芯片

### 公钥密码体制

- 基于数论中的大数分解问题
- 公钥密码体制中，加密密钥（即公钥 PK: public key）是向公众公开的
  - 解密密钥（即私钥或密钥 SK: secret key）是需要保密的
- **加密算法E 和 解密算法D 也都是公开的**
- 过程
  - 发送者A用B的公钥PKb对明文X 加密
  - 接收者B用自己的私钥SKb解密，即恢复出明文
  - Dskb(Y) = Dskb(Epkb(X)) = X
- 解密密钥是**接收者专用的密钥，对其他人都保密**
- **加密密钥是公开的，但不能用它来解密**，即
  - Dpkb(Epkb(X)) != X
- 其他特点
  - 加密和解密的运算可以对调
  - 从一直的PK实际上不可能推导出SK
    - 即从PK到SK是 计算上不可能的
- 注意点
  - 任何加密方法安全性取决于
    - 密钥长度
    - 攻破密文需要的计算量
  - 传统加密方法由于开销小，目前不会放弃
  - 公钥里面的密钥分配协议，比传统的要复杂

## 5、数字签名

- 要实现数字签名，必须保证以下三点
  - 报文鉴别
    - 接收者能核实发送者对报文的签名
  - 报文的完整性
    - 发送者事后不能抵赖对报文的签名
  - 不可否认
    - 接收者不能伪造对报文的签名
- 有很多种实现数字签名的方法，公钥算法比较容易实现
- 下面图上是公钥算法的实现
- ![](C:\Users\刘鹏程12138\Desktop\计网复习笔记\公钥算法实现数字签名.PNG)

- 因为除了A，没有别人有A的私钥，所以没有别人能产生这个密文
  - 所以B可以相信X是A发送的
- 若A要抵赖，B可以将明文和密文出示给第三者
  - 第三者容易用A的公钥与证实A确实发送给B
- 若B将X伪造成X+，于是B不能在第三者前出示对应的密文
  - 证明了B伪造了报文
- **<u>上述过程只对报文进行了签名，对报文X本身没有保密</u>**
  - 截获到密文，如果知道发送者身份，查手册可以获得发送者的公钥
  - 于是就知道了报文的内容
  - **<u>可以采用以下的方案，同时实现秘密通信和数字签名</u>**
  - ![](C:\Users\刘鹏程12138\Desktop\计网复习笔记\普通的数字签名加上秘密通信.PNG)

补充

1. DES；Data Encryption Standard；数据加密标准；是一种使用密钥加密的块算法。
2. AES；Advanced Encryption Standard；高级加密标准；是美国联邦政府采用的一种区块加密标准。
3. DSS；Digital Signature Standard；数字签名标准；美国政府用来指定数字签名算法的一种标准。
4. DSA；Digital Signature Algorithm；数字签名算法；是数字签名标准的一个子集，表示了只用作数字签名的一个特定的公钥算法。

<details class="details-reset details-overlay details-overlay-dark" style="box-sizing: border-box; display: block;"><summary data-hotkey="l" aria-label="Jump to line" role="button" style="box-sizing: border-box; display: list-item; cursor: pointer; list-style: none;"></summary></details>

   

