# 物理层

## 1、概要

### 数据传输类型

- 信号
  - 按照在传输介质上传输的信号类型
    - 通信系统可以分为模拟通信系统，数字通信系统
  - 模拟信号(analog signal)
    - 电平连续变化
    - (就是正余弦函数)
  - 数字信号(digital signal)
    - 使用两种不同的电平去表示0、1比特序列 
    - 是一种电压脉冲信号表示

### 数据通信方式

- 单工、半双工和全双工通信
  - 单工 **simplex**
    - 数据只在一个方向上传输，不能实现双方通信
    - 的数据通信方式
  - 半双工 **half-duplex**
    - 允许数据在两个方向上传输
    - 但是同一时间数据只能在一个方向上传输
    - 实际上时切换的单工
  - 全双工 **full duplex**
    - 允许数据在两个方向上同时传输
- 串行通信、并行通信
  - 串行传输 **serial transmission**
    - 每次传输1位bit
  - 并行传输 **parallel transmission**
    - 由0和1组成的二进制数据
    - 组成每组n比特的位组
    - 并行传输这种位组，而非单独的bit

### 同步方式

​	同步一般用于 **有大批数据要传输**

​	异步一般用于 **工业、实际应用中。特别是短距离、速率要求不高情况**

- 同步通信
  - 通信双方先建立同步，即时钟调整到同一个频率
  - 每个**数据块(信息帧)：有三个部分组成**
    - 2个同步字符SNY 作为一个信息帧的起始标志
    - n个连续传送的数据
    - 2个字节循环冗余校验码CRC
  - 有公共时钟
  - 所有设备按统一时序、统一的传输周期来传输
- 异步通信
  - 没有公共时钟
  - **信息帧有一个起始位（逻辑"1"），一个终止位（逻辑"0"）**
  - **没有统一传输周期**
  - 采用应答方式通信
  - 具体的联络方式有
    - 不互锁
    - 半互锁
    - 全互锁

## 2、LAN介质

- 作用是传输数据
- 传输的过程被称为编码(encoding)
- 几种线缆
  - <u>**STP(Shielded Twisted Pair屏蔽双绞线)要和(spanning-tree protocol区别开来)**</u>
    - **<u>是广泛用于数据传输的铜质双绞线</u>**
    - 减少crosstalk(串扰) by EMI and RFI
    - 因为有金属屏蔽材料，相比UTP，提供了**<u>更好的抗干扰能力</u>**
  - **<u>UTP(Unshielded Twisted Pair非屏蔽双绞线)</u>**
    - 8种不同颜色的线
    - 分成4对绞合在一起
    - **<u>没有</u>**金属屏蔽材料
    - 相对便宜一些
    - 容易安装(install)
    - 使用**<u>RJ connector</u>**来安装
      - 保证了稳定连接
  - **<u>Coaxial（同轴电缆）</u>**
    - 比光缆便宜，但比双绞线贵
    - 具有良好的抗干扰特性，广泛用于传输较高速率的数据
  - **<u>Fiber-Optic(光缆)</u>**
    - 相比其他介质，能支持更快的数据传输
      - 不会受到EMI\RFI的影响
      - light travels down the *axis* of the cable
        - **光纤沿着电缆的轴线传播**
    - 进行**可调节**的光传输
    - 用光导纤维传输电磁波
      - single mode单模光纤
        - 又叫做 axial
        - 比多模的快
        - 比多模直径小(less dispersion分散公勺)
        - 常用在WAN
        - uses ILD most often but also LED
      - multimode多模光纤
        - 光线以不同角度射入
        - 不沿着电缆轴线传播
        - 比单模体积大，常用在LAN
        - susceptible to greater dispersion
  - **<u>wireless communication(无线传输)</u>**
    - 将信号(signals)编码为电磁波
    - 最原始的辨别不同电磁波的方式，是**<u>利用频率</u>**
    - 几种不同的传输方式
      - lasers
        - (激光)
        - 制造出一个连续的电磁场
        - 其中同一频率的wave被分配到一个phase
      - infrared
        - (红外线)
        - 是一种可视传播技术
        - 不能穿过不透明物体
      - radio
        - (无线电)
        - 运载的数据信号(data signals)可以穿过墙壁
        - 用在地面和卫星**<u>无线电技术</u>**

## **3**、UTP for Ethernet

- 以太网的非屏蔽双绞线
  - 使用TIA/EIA标准
    - TIA 美国通信工业协会 Telecommunication Industry Association
    - EIA (美国)电子工业协会 Electronic Industries Association
    - 如果能考到具体的内容我吃了这个电脑屏幕
- 不同的UTP种类
  - 一类线
    - 用于语音传输
  - 二类线
    - 语音和低速数据传输
    - 常见在令牌网
  - <u>**三类线**</u>
    - <u>**EIA/TIA568标准指定电缆**</u>
    - **<u>用于10BASE-T</u>**
  - 四类线
    - **<u>用于10/100BASE-T</u>**
  - <u>**五类线**</u>
    - <u>**增加了绕线密度**</u>
    - **<u>用于语音和数据传输</u>**
    - <u>**外套高质量绝缘材料**</u>
    - <u>**是最常用的以太网电缆**</u>
    - **<u>用于100/1000BASE-T</u>**
    - <u>**五类线比三类线有着更高的绞合度**</u>
  - <u>**超五类线**</u>
    - <u>**衰减小，串扰少**</u>
    - <u>**更高的信噪比**</u>
    - <u>**更小的时延误差**</u>
    - **<u>用于1000BASE-T</u>**
  - <u>**六类线**</u>
    - <u>**性能远高于超五类**</u>
    - <u>**高于1Gbps的应用哦个**</u>
  - 七类线
    - 带宽600MHz，可用于今后10G比特以太网
- 不同的电缆(Cable)种类
  - **straight cable直连线**
    - 用来将计算机炼乳Hub或者switch的以太网口
    - Straight cable: *use
      T568A on both ends or T568B on both ends*
      - 1----1
      - 2----2
      - 3----3
      - 6----6
  - **rollover cable反转线**
    - 用于连接一个终端和一个router/switch的console口
      - 进行配置
    - 一端的pin 1 连到 另一端的pin 8
    - 一端的pin 2 连到 另一端的pin 7
    - 以此类推
  - **crossover cable交叉线**
    - 一端上的pair 2和3，在另一端被反转
      - 一端是T568-A，另一端T568-B
      - 即4对线，两对颠倒
        - 1----3
        - 2----6
    - is considered to be part of the "vertical" cabling/backbone
    - 能够用来
      - 连接 2 or more hubs or switched
      - 连接2个isolated workstations to create a mini-LAN
        - 即两个计算机直接相连

## 4、Data Transmission and Data coding

- 什么叫信号
  - 数据的电气的或电磁的表现
  - 分为
    - 模拟的 analogous
      - 简单信号(正弦波)不能再分解为更简单的
      - 复合信号，可以被分为多个正弦波
        - 使用傅里叶分析
    - 数字的 digital
      - 一般非周期的，呈现为方波
      - 一个数字信号可以分解为无穷多个简单正弦波
      - 发数字信号，实质是在发送无穷多的简单正弦波
      - 无法避免信号畸变
        - 有时候，有失真，但是还可以识别
        - 有时候，失真大，接收信号波形都辨别不出来了
      - 码元传输速率越高，或信号传输距离越远，输出端波形失真越严重
        - **码元code**
          - **代表不同离散数值的基本波形**
- **无噪声**信道有**最高传输速率**
  - 码元传输的速率是有上限的，否则会有**<u>码间串扰</u>**的问题
  - C=*W* log2L bps
- **噪声**信道的**最高传输速率**
  - *C*= *W*log2(1+*S*/*N*)  bps 
  - W为信道带宽
  - S为信道内所传信号的平均功率
  - N为信道内部的高斯噪声功率
  - S/N为**信噪比**
    - 信噪比越大，极限传输速率越高
    - 只要信息传输速率，低于极限信息传输速率
      - **<u>一定可以实现无差别的传输</u>**
      - 实际上能达到的速率比这个极限低了很多
- 波特率和比特率
  - 波特率(baud)
    - 信号每秒钟变化的次数
  - 比特率(bit)
    - 每秒钟传送的二进制位数
  - 每个信号值表示3位，则比特率是波特率的3倍
  - 每个信号值表示1位，则二者相同
- 数据通信技术：数字数据编码
  - 基带：基本频带，指的是 传输变换前占用的频带，是**原始信号<u>固有的</u>频带**
    - 计算机输出的各种数据都属于**基带信号**
  - 基带传输：在传输时直接使用基带信号（**不转成模拟信号，即不调制**）
    - 这种传输方式比较简单基本，低电平表示0，高电平表示1
  - 若将**数字信号转换到模拟信号**
    - 因为很多物理层介质不能传输基带信号
      - （基带信号种往往有很多低频部分）
    - 所以用**调制**
    - **<u>调幅（AM）</u>**
      - 即载波的**<u>振幅</u>**随着基带数字信号变化
        - 0对应无载波，1对应有载波
    - **<u>调频（FM）</u>**
      - 即载波的**<u>频率</u>**随着基带数字信号变化
        - 0对应频率f1，1对应频率f2
    - **<u>调相（PM）</u>**
      - 载波的**<u>初始相位</u>**随着基带数字信号而变化
        - 0对应相位0度，1对应相位180度
        - 就是那个波形**凹凸不平**的
  - 要获得上面的数字信号，要把**数字数据转换到数字信号**：线路编码(**<u>Line coding</u>**)
    - 指的是：将**<u>二进制数据</u>**，转换成一种格式；而这种格式可以在一定的**物理链路上传输**
- 这里详细讲一下编码方式
  - **单极性编码**
    - 用**0电平表示二进制"0"，正电平表示“1”**
      - 容易产生传播错误
        - 难以分辨一位的结束和另一位开始
        - 收发双方需要**时钟同步**
        - 直流分量问题严重（当0、1连续出现时）
  - **极化编码**
    - 不归零制码(NRZ: Non-Return to Zero)
      - 不归零电平编码
        - **负电平表示“0”，正电平表示“1”**（或者相反）
          - 还是难以分辨一位的结束和另一位的开始
          - 发送方和接收方必须有时钟同步
          - 尽管不会像单极性那样严重，但0、1连续出现时，直流分量问题依然挺严重的
      - 不归零**反相**编码
        - 电平**一次翻转**代表1，无电平变化代表0
        - 优于之前的电平编码
          - 可以根据电平**跃迁**进行**有限的同步**
    - 归零制码(RZ: Return to Zero)
      - 负电平表示“0”，正电平表示“1”，两个bit中间跳到0电平（这就是归零）
      - 通过机制提供同步，经济，不宜出错
      - 但因为需要三个不同电平，两次信号变化来编码1bit (0--+--0)
        - **<u>增加了占用的带宽</u>**
    - 双相位编码
      - **<u>曼彻斯特码(Manchester)</u>**
        - **<u>每一位中间</u>**有一个跳变，从低到高表示“0”，从高到低表示“1”
        - 克服了NRZ的不足，每位中间的跳变既可以作为数据，又可以作为时钟进行同步
        - 只采用两个电平，比RZ效率高
      - **<u>差分曼彻斯特码(Differential Manchester)</u>**
        - 每一位**中间跳变：表示时钟**
          - **中间始终有跳变**
        - 每一位**位前跳变：表示数据**
          - **<u>有跳</u>变为<u>0</u>，无跳变为1**
          - 第一位不知道他有没有变，所以如果**没有指定时，应该有两种**
        - 有点：时钟、数据分离，便于提取
  - 双极性编码
    - **<u>双极性传号交替反转码(AMI)</u>** **Alternate mark inversion code**
      - 采用三个电平：正、负、零（与RZ相同）
      - **零电平表示"0"，正负电平的跃迁都表示"1"**（与RZ不同）
      - 对每次出现的“1”实现交替反转，使得**直流分量为0**
      - 连续的“0”不能同步，但**连续“1”可以同步**

## 5、Multiplexing Technology

- 多路复用技术
  - 一个用户信号传输量很小
  - 一条线路传输能力很强
  - 要让多个用户能够共同使用一条物理线路
- 时分复用(TDM: Time Division Multiplexing)
  - 将**时间划分为**一段段等长的时分复用(TDM)帧
  - **每个时分复用的用户在每个TDM帧中占用固定序号的时隙**
  - 每个用户所占用的时隙是周期性地出现
  - TDM信号也成为等时(isochronous)信号
  - 时分复用的所有用户，在不同的时间占用**<u>同样的频带宽度</u>**
  - 明显**<u>用户对分配到的子信道利用率不高</u>**
  - **STDM(Statistic TDM统计时分复用)**
    - **根据用户实际需要，动态分配线路资源**
- 频分复用(FDM: Frequency Division Multiplexing)
  - 用户在分配到一定的频带后，通信过程种，**<u>始终占用这个频带</u>**
  - 所有用户**<u>同样时间</u>**，占用不同的**<u>频率带宽资源</u>**
- 波分复用(WDM: Wavelength Division Multiplexing)
  - 就是光的**<u>频分复用</u>**
- 码分复用(CDM: Code Division Multiplexing)
  - 常用码分多址CDMA(Code Division Multiple Access)
  - 各个用户使用特殊挑选的不同码型，所以彼此不干扰
  - 有很强的抗干扰能力，频谱就像白噪声，不容易被敌人发现