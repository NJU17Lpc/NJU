# 第十三章

## 1、耦合与内聚名词解释

- 耦合
  - 耦合描述的是两个模块之间关系的复杂程度
- 内聚
  - 内聚表达的是一个模块内部的联系的紧密性

## 2、不同程度的耦合和内聚

### 耦合

数据耦合最好，控制、印记耦合还能接收

- 内容耦合
  - 一个模块直接修改另一个模块的内容
  - 如某些语言能改变另一个模块的内部数据
  - 内部类可以直接修改外部类，就是一个内容耦合
  - 组合中也容易出现内容耦合，组合的对象如果将成员变量设置为public更严重
- 公共耦合
  - 模块之间共享全局的数据
  - 全局变量
- 重复耦合
  - 模块之间有相同逻辑的重复代码
  - 非常隐蔽，通常是代码复制粘贴
- 控制耦合
  - 一个模块给另一个模块传控制信息
  - 控制耦合共享的是逻辑
  - 区别数据耦合：A给B“星期天”，让B显示这几个字，是数据耦合
    - A给B“7”，让B显示“星期天”，只是控制耦合
- 印记耦合
  - 共享一个数据结构，但只用了其中一部分
- 数据耦合
  - 只共享对u放需要的数据

### 内聚

功能、信息内聚最好，他们的出发点不同，一个重功能，一个重数据和功能之间的相互支撑

偶然、逻辑内聚不能接收

通信、过程、时间内聚有各自出发点，不好比较，往往用于负责控制过程的模块。需要限制使用

- 偶然内聚
  - 模块中执行的操作毫无联系，只是放在一起
  - 如果模块部分之间有其他内聚
    - 但只要有一小块部分算偶然内聚，根本没有存在意义，整体就是偶然内聚
    - 像Util这种工具类基本都是偶然内聚
- 逻辑内聚
  - 模块执行一系列逻辑上相似的操作，其他模块决定用哪个操作
  - 如把开车、坐火车、坐飞机放在一起
  - 要注意 逻辑内聚中，各个东西还有一些联系
    - 偶然内聚中是完全没联系，比如电梯
      - 什么报警、开门、显示日志全写上去，就是偶然
- 时间内聚
  - 模块执行一系列与时间相关的操作
  - 这些操作在同一时间段发生
  - 比如：（早上）起床、刷牙、洗脸、吃饭
  - 要注意，一般用于在同一时间(比如初始化时)，执行了多个不同目的的活动
    - 而过程内聚应该时要针对同一个目的
- 过程内聚
  - 执行一系列与步骤顺序相关的操作，是解决同一个问题的不同步骤
  - 比如：（保养车时）洗车、消除凹痕、打磨、上蜡
  - 上面说初始化时，做的一些事为时间内聚
    - 但要解决一个问题时，初始化只是一个步骤，如初始化、处理、输出
      - 这个是过程内聚
- 通信内聚
  - 模块内的操作，都是针对同一数据进行的
  - 比如：（对一本书）查询书名、查询价格、查询出版社、查询作者
  - 一般和数据读入写出什么相关的时通信内聚
    - 如果模块只是一个方法，解决一个小问题，也不好说他对数据有共享，这时通常就是功能内聚了。这个时候要看他是不是只有一个目的
    - 但有时，一个方法中一堆if else，大范围共享了同样的几个数据，还是可以优先说他是通信内聚
- 功能内聚
  - 模块只执行一个单一目的的操作
  - 比如：计算平方根
  - 通常一个模块中，有计算、打印等不同目的的东西，就不是功能内聚
- 信息内聚
  - 模块内有一系列操作，每个操作都有各自的入口点和出口点
  - 每个操作的代码相对独立，都在相同的数据结构上完成，却形成一个抽象的整体
  - 信息内聚的模块主要用来实现抽象的数据类型

### 对例子**，说明他们之间的耦合程度与内聚，给出理由

## 3、信息隐藏

### 基本思想

- 利用抽象的方法，抽象出每个类的关键细节，也就是模块的职责
- 信息隐藏的核心设计思路是：
  - 每个模块都隐藏一个重要的设计决策
  - 每个模块都承担一定的职责，对外表现为一份契约
  - 并且在这份契约之下隐藏着  **只有这个模块知道**的设计决策或者秘密
  - 决策实现的细节（特别是容易改变的细节），只有该模块自己知道

### 两种常见的信息隐藏决策（找不到）

- 职责的实现
  - 需求可能不断变化，变化的幅度很大
- 实现的变更
  - 比如有用了不同的数据库、不同的语言标准和库

### 对于例子**，说明其信息隐藏程度好坏（找不到）

一般信息隐藏做的不好的原因，就是模块化没做好，碰到这种信息隐藏的应该可以从模块化入手，内聚耦合什么